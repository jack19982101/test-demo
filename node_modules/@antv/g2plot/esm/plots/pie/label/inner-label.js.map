{"version":3,"file":"inner-label.js","sourceRoot":"","sources":["../../../../src/plots/pie/label/inner-label.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,UAAU,CAAC;AAC5C,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AACtD,OAAO,EAAE,uBAAuB,EAAE,MAAM,UAAU,CAAC;AAEnD,IAAM,QAAQ,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;AAEzC;IAAmC,iCAAQ;IAA3C;QAAA,qEAmCC;QAlCQ,mBAAa,GAAG,WAAW,CAAC;;IAkCrC,CAAC;IAhCC;;;OAGG;IACO,0CAAkB,GAA5B;QACE,IAAM,GAAG,GAAG,iBAAM,kBAAkB,WAAE,CAAC;QACvC,OAAO,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;IAChD,CAAC;IAED;;;OAGG;IACH,aAAa;IACH,wCAAgB,GAA1B,UAA2B,MAAuB;QAChD,IAAM,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,IAAM,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;QACtC,IAAI,WAAW,GAAG,CAAC,CAAC;QACpB,IAAI,YAAY,GAAG,MAAM,CAAC;QAE1B,IAAI,QAAQ,CAAC,YAAY,CAAC,EAAE;YAC1B,iBAAiB;YACjB,IAAI,UAAU,CAAC,WAAW,EAAE;gBAC1B,WAAW,GAAG,MAAM,GAAG,CAAC,UAAU,CAAC,WAAW,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;gBACpE,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,uBAAuB,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aAC3G;iBAAM;gBACL,YAAY,GAAG,MAAM,GAAG,uBAAuB,CAAC,YAAY,CAAC,CAAC;aAC/D;SACF;QAED,OAAO,KAAK,CAAC,YAAY,CAAC,IAAI,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,YAAY,CAAC;IAChG,CAAC;IACH,oBAAC;AAAD,CAAC,AAnCD,CAAmC,QAAQ,GAmC1C","sourcesContent":["import { getGeometryLabel } from '@antv/g2';\nimport { deepMix, isNil, isString } from '@antv/util';\nimport { parsePercentageToNumber } from '../utils';\n\nconst PieLabel = getGeometryLabel('pie');\n\nexport class PieInnerLabel extends PieLabel {\n  public defaultLayout = 'pie-inner';\n\n  /**\n   * 获取 label 的默认配置\n   * - 饼图 inner-label 强制不显示 label 牵引线\n   */\n  protected getDefaultLabelCfg() {\n    const cfg = super.getDefaultLabelCfg();\n    return deepMix({}, cfg, { labelLine: false });\n  }\n\n  /**\n   * 获取标签 offset距离（默认 -30% ）\n   * todo G2 offset 允许百分比设置后，移除 ts-ignore\n   */\n  // @ts-ignore\n  protected getDefaultOffset(offset: number | string) {\n    const coordinate = this.getCoordinate();\n    const radius = coordinate.getRadius();\n    let innerRadius = 0;\n    let actualOffset = offset;\n\n    if (isString(actualOffset)) {\n      // 存在 innerRadius\n      if (coordinate.innerRadius) {\n        innerRadius = radius * (coordinate.innerRadius / coordinate.radius);\n        actualOffset = (radius - innerRadius) * (parsePercentageToNumber(actualOffset) + (coordinate.radius - 1));\n      } else {\n        actualOffset = radius * parsePercentageToNumber(actualOffset);\n      }\n    }\n\n    return isNil(actualOffset) || actualOffset > 0 ? -(radius - innerRadius) * 0.3 : actualOffset;\n  }\n}\n"]}